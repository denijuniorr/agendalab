<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8"/>
  <title>Agendamento Global</title>

  <style>
    body{font-family:Arial;margin:0;padding:0;background:#f2f2f2;}
    .wrap{display:flex;max-width:800px;margin:40px auto;gap:20px;}
    .form, .lista{background:#fff;padding:20px;border-radius:6px;flex:1;}
    input, button{width:100%;padding:10px;margin:6px 0;box-sizing:border-box;}
    .item{border:1px solid #ddd;padding:8px;margin:4px 0;display:flex;justify-content:space-between;align-items:center;}
    .cancel{background:#e74c3c;color:#fff;border:none;padding:4px 8px;cursor:pointer;}
  </style>

  <!-- Firebase compat SDK (FUNCIONA EM GITHUB PAGES) -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
</head>

<body>
  <div class="wrap">
    <div class="form">
      <h2>Agendar equipamento</h2>
      <input id="nome" placeholder="Seu nome">
      <input id="equip" placeholder="Nome do equipamento">
      <input id="tempo" placeholder="Tempo de uso (ex: 2h)">
      <button onclick="salvar()">Criar agendamento</button>
    </div>

    <div class="lista">
      <h2>Agendamentos</h2>
      <div id="listagem">Carregandoâ€¦</div>
    </div>
  </div>

  <script>
    // CONFIG DO SEU FIREBASE
    const firebaseConfig = {
      apiKey: "AIzaSyCd5eVLTG5_3_2lI61AB-gcbuz4wjmZCZY",
      authDomain: "teste192-9b4e9.firebaseapp.com",
      databaseURL: "https://teste192-9b4e9-default-rtdb.firebaseio.com",
      projectId: "teste192-9b4e9",
      storageBucket: "teste192-9b4e9.firebasestorage.app",
      messagingSenderId: "1063522852340",
      appId: "1:1063522852340:web:d0144ce6c187f289f6eda1",
      measurementId: "G-2K0W4KF291"
    };

    // Inicializar Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const agendRef = db.ref('agendamentos');

    // Criar agendamento
    function salvar(){
      const n = document.getElementById('nome').value.trim();
      const e = document.getElementById('equip').value.trim();
      const t = document.getElementById('tempo').value.trim();

      if(!n || !e || !t){
        alert('Preencha tudo');
        return;
      }

      agendRef.push({nome:n, equip:e, tempo:t});

      document.getElementById('nome').value = '';
      document.getElementById('equip').value = '';
      document.getElementById('tempo').value = '';
    }

    // Cancelar agendamento
    function cancelar(id){
      const senha = prompt('Digite a senha para cancelar:');
      if(senha !== 'engenhariaexata') return;
      agendRef.child(id).remove();
    }

    // Listar agendamentos em tempo real
    agendRef.on('value', snap => {
      const dados = snap.val() || {};
      const html = Object.keys(dados).map(id => {
        const a = dados[id];
        return `
          <div class="item">
            <span>${a.nome} - ${a.equip} (${a.tempo})</span>
            <button class="cancel" onclick="cancelar('${id}')">Cancelar</button>
          </div>`;
      }).join('');

      document.getElementById('listagem').innerHTML = html || 'Nenhum agendamento.';
    });
  </script>
</body>
</html>
